!function(){function e(e,t){for(var o=[];e.length;)o.push(e.splice(0,t));return o}let t=document.querySelector(".completed-orders");t?(t.click(),setTimeout((function(){let o=t.parentNode.parentNode.parentNode;o=o.querySelector(":scope>div:nth-child(2)>div>div>div:nth-child(3)>div>div");let r=o.querySelectorAll(":scope>div"),a="rgb(0, 200, 83)",n=Array.from(r).filter((e=>a===window.getComputedStyle(e,":before").backgroundColor));if(!n.length)return void alert("No trades found. Make sure you have made some trades in WazirX.");let l=[];n.forEach((e=>{let t=e.querySelectorAll(":scope>div:first-child>div>span:first-child");l.push(...Array.from(t))})),console.log(l,"ELS2"),l=l.map((e=>e.innerText.split("\n")[0]));let i=e(l,4),s=["Pair","Amount","Price","Total"];elementsObjects=i.map((e=>{let t={};return e.forEach(((e,o)=>{t[s[o]]=o?parseFloat(e.replaceAll(",","")):e})),t}));let c=Array.from(r).filter((e=>a!==window.getComputedStyle(e,":before").backgroundColor)),u=[];c.forEach((e=>{let t=e.querySelectorAll(":scope>div:first-child>div>span:first-child");u.push(...Array.from(t))})),console.log(u,"ELS"),u=Array.from(u).map((e=>e.innerText.split("\n")[0]));let d=e(u,4);sellElementsObjects=d.map((e=>{let t={};return e.forEach(((e,o)=>{t[s[o]]=o?parseFloat(e.replaceAll(",","")):e})),t})),fetch("https://api.wazirx.com/api/v2/tickers").then((e=>e.json())).then((e=>{let t={};elementsObjects.forEach((o=>{t.hasOwnProperty(o.Pair)||(t[o.Pair]={Amount:0,Total:0,Current:parseFloat(e[o.Pair.toLowerCase()+"inr"].last)}),t[o.Pair].Amount+=o.Amount,t[o.Pair].Total+=o.Total}));let o={};sellElementsObjects.forEach((e=>{o.hasOwnProperty(e.Pair)||(o[e.Pair]={Amount:0,Total:0}),o[e.Pair].Amount+=e.Amount,o[e.Pair].Total+=e.Total}));let r={"Total Profit/Loss":0},a=[],n=["Amount","Total","Current","Price","Difference","Profit/Loss"];Object.keys(t).forEach(((e,n)=>{t[e].Price=t[e].Total/t[e].Amount,o.hasOwnProperty(e)&&(t[e].Amount=t[e].Amount-o[e].Amount,t[e].Total=t[e].Amount*t[e].Price),t[e].Difference=t[e].Current-t[e].Price,t[e]["Profit/Loss"]=t[e].Amount*t[e].Difference,t[e]["Percentage Profit/Loss"]=t[e]["Profit/Loss"]/t[e].Total*100,r["Total Profit/Loss"]+=t[e]["Profit/Loss"],a.push([]),a[n].push(e),Object.keys(t[e]).forEach((o=>{t[e][o]=parseFloat(t[e][o].toFixed(4)),a[n].push(t[e][o])})),a[n].push(parseFloat(r["Total Profit/Loss"].toFixed(4)))})),n=["Pair","Amount","Total","Current","Price","Difference","Profit/Loss","Percentage Profit/Loss","Cumulative Profit/Loss"],a.unshift(n);let l=a.map((e=>e.map((e=>'"'+e+'"')).join(",")));l=l.join("\n"),function(e){window.URL=window.webkitURL||window.URL;var t="text/csv",o=new Blob([e],{type:t}),r=document.createElement("a");r.download="wazir-data-"+Date.now()+".csv",r.href=window.URL.createObjectURL(o),r.textContent="Download CSV",r.dataset.downloadurl=[t,r.download,r.href].join(":"),document.body.appendChild(r),r.click()}(l)}))}),1e3)):alert("No trades found. Make sure you are on WazirX, in the Exchange tab.")}();
