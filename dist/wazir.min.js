!function(){function e(e,t){for(var o=[];e.length;)o.push(e.splice(0,t));return o}let t=document.querySelector(".completed-orders");t?(t.click(),setTimeout((function(){let t=document.querySelectorAll(".fKIOhs>div .hVoHzJ>div:first-child>div>span:first-child");if(!t.length)return void alert("No trades found. Make sure you have made some trades in WazirX.");t=Array.from(t).map((e=>e.innerText.split("\n")[0]));let o=e(t,4),r=["Pair","Amount","Price","Total"];elementsObjects=o.map((e=>{let t={};return e.forEach(((e,o)=>{t[r[o]]=o?parseFloat(e.replaceAll(",","")):e})),t}));let a=document.querySelectorAll(".fKIOhs>div .dQPAKa>div:first-child>div>span:first-child");a=Array.from(a).map((e=>e.innerText.split("\n")[0]));let n=e(a,4);sellElementsObjects=n.map((e=>{let t={};return e.forEach(((e,o)=>{t[r[o]]=o?parseFloat(e.replaceAll(",","")):e})),t})),fetch("https://api.wazirx.com/api/v2/tickers").then((e=>e.json())).then((e=>{let t={};elementsObjects.forEach((o=>{t.hasOwnProperty(o.Pair)||(t[o.Pair]={Amount:0,Total:0,Current:parseFloat(e[o.Pair.toLowerCase()+"inr"].last)}),t[o.Pair].Amount+=o.Amount,t[o.Pair].Total+=o.Total}));let o={};sellElementsObjects.forEach((e=>{o.hasOwnProperty(e.Pair)||(o[e.Pair]={Amount:0,Total:0}),o[e.Pair].Amount+=e.Amount,o[e.Pair].Total+=e.Total}));let r={"Total Profit/Loss":0},a=[],n=["Amount","Total","Current","Price","Difference","Profit/Loss"];Object.keys(t).forEach(((e,n)=>{t[e].Price=t[e].Total/t[e].Amount,o.hasOwnProperty(e)&&(t[e].Amount=t[e].Amount-o[e].Amount,t[e].Total=t[e].Amount*t[e].Price),t[e].Difference=t[e].Current-t[e].Price,t[e]["Profit/Loss"]=t[e].Amount*t[e].Difference,t[e]["Percentage Profit/Loss"]=t[e]["Profit/Loss"]/t[e].Total*100,r["Total Profit/Loss"]+=t[e]["Profit/Loss"],a.push([]),a[n].push(e),Object.keys(t[e]).forEach((o=>{t[e][o]=parseFloat(t[e][o].toFixed(4)),a[n].push(t[e][o])})),a[n].push(parseFloat(r["Total Profit/Loss"].toFixed(4)))})),n=["Pair","Amount","Total","Current","Price","Difference","Profit/Loss","Percentage Profit/Loss","Cumulative Profit/Loss"],a.unshift(n);let i=a.map((e=>e.map((e=>'"'+e+'"')).join(",")));i=i.join("\n"),function(e){window.URL=window.webkitURL||window.URL;var t="text/csv",o=new Blob([e],{type:t}),r=document.createElement("a");r.download="wazir-data-"+Date.now()+".csv",r.href=window.URL.createObjectURL(o),r.textContent="Download CSV",r.dataset.downloadurl=[t,r.download,r.href].join(":"),document.body.appendChild(r),r.click()}(i)}))}),1e3)):alert("No trades found. Make sure you are on WazirX, in the Exchange tab.")}();
